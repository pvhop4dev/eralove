// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package app

import (
	"github.com/eralove/eralove-backend/internal/config"
	"github.com/eralove/eralove-backend/internal/handler"
	"github.com/eralove/eralove-backend/internal/infrastructure"
	"github.com/eralove/eralove-backend/internal/repository"
	"github.com/eralove/eralove-backend/internal/service"
	"github.com/google/wire"
	"go.uber.org/zap"
)

// Injectors from wire.go:

// InitializeApp creates a new application with all dependencies injected
func InitializeApp(cfg *config.Config, logger *zap.Logger) (*App, error) {
	mongoDB, err := infrastructure.ProvideMongoDB(cfg, logger)
	if err != nil {
		return nil, err
	}
	userRepository := repository.ProvideUserRepository(mongoDB, logger)
	passwordManager := infrastructure.ProvidePasswordManager()
	jwtManager := infrastructure.ProvideJWTManager(cfg)
	userService := service.ProvideUserService(userRepository, passwordManager, jwtManager, logger)
	validate := infrastructure.ProvideValidator()
	i18n := infrastructure.ProvideI18n(logger)
	userHandler := handler.ProvideUserHandler(userService, validate, i18n, logger)
	dependencies := ProvideDependencies(userHandler)
	app, err := ProvideApp(cfg, logger, dependencies)
	if err != nil {
		return nil, err
	}
	return app, nil
}

// wire.go:

// ApplicationSet combines all provider sets
var ApplicationSet = wire.NewSet(infrastructure.InfrastructureSet, repository.RepositorySet, service.ServiceSet, handler.HandlerSet, ProvideDependencies,
	ProvideApp,
)

// ProvideDependencies creates the dependencies struct
func ProvideDependencies(userHandler *handler.UserHandler) *Dependencies {
	return &Dependencies{
		UserHandler: userHandler,
	}
}

// ProvideApp creates the main application
func ProvideApp(cfg *config.Config, logger *zap.Logger, deps *Dependencies) (*App, error) {
	return NewWithDependencies(cfg, logger, deps)
}
